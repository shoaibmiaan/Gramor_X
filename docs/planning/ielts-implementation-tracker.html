<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>IELTS Platform Implementation Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0c10; --card:#111319; --text:#e8eaed; --muted:#a7b0bf;
      --border:#232733; --acc:#3b82f6; --ok:#10b981; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
    h1{margin:0 0 8px}
    .legend{color:var(--muted);margin-bottom:8px}
    .bar{display:flex;gap:12px;align-items:center;flex-wrap:wrap;
         position:sticky;top:0;background:rgba(11,12,16,.9);backdrop-filter:blur(6px);
         border-bottom:1px solid var(--border);padding:10px;margin:6px 0 12px}
    select,button{background:var(--card);color:var(--text);border:1px solid var(--border);
           border-radius:8px;padding:8px 10px}
    .stats{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0 10px}
    .stat{background:var(--card);border:1px solid var(--border);padding:6px 10px;border-radius:8px}
    table{width:100%;border-collapse:collapse}
    thead th{position:sticky;top:56px;background:var(--bg);z-index:2;color:#b9c2d0;
             text-align:left;font-weight:600;padding:10px;border-bottom:1px solid var(--border)}
    tbody td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}

    .pill{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border)}
    .pill.todo{background:#1a1d25}
    .pill.prog{background:#1e2431;border-color:#2a3346;color:#c5d2ea}
    .pill.done{background:#0f1d17;border-color:#124d3a;color:#a9efd4}
    .nowrap{white-space:nowrap}
    .muted{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
    .section-title{font-weight:700;margin-bottom:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:8px}
    .badge{display:inline-block;font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--border)}
    .badge.ok{background:#0f1d17;color:#a9efd4}
    .badge.warn{background:#241c0f;color:#f5d39e}
    .bar .btn{cursor:pointer}
    .sum{min-width:280px}
    input[type="date"]{background:var(--card);border:1px solid var(--border);color:var(--text);border-radius:8px;padding:6px}
    .hint{font-size:12px;color:#92a0b6;margin-top:6px}
    a.link{color:var(--acc);text-decoration:none;border-bottom:1px dashed var(--acc)}
    a.link:hover{opacity:.9}
    /* chips used in targets/user sections */
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .chip{background:#12151c;border:1px solid var(--border);border-radius:999px;padding:4px 10px;color:#c9d4e4;font-size:12px}
    /* nice buttons for Command Center */
    .actions{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:8px}
    .action{display:block;text-align:center;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#10131a;text-decoration:none;color:#dfe7f3}
    .action:hover{border-color:#32415e}
    .action.prim{background:#0f1d17;color:#a9efd4;border-color:#124d3a}
    .action.warn{background:#241c0f;color:#f5d39e;border-color:#4d3b12}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üìã IELTS Platform Implementation Tracker</h1>
    <div class="legend">Legend: <code>[ ]</code> Not started ‚Ä¢ <code>[~]</code> In progress ‚Ä¢ <code>[x]</code> Completed</div>

    <!-- üöÄ GO-LIVE COMMAND CENTER (student-first deep links) -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">üöÄ Go‚ÄëLive Command Center ‚Äî start here</div>
      <div class="actions">
        <a class="action prim" href="/dashboard">Open Dashboard</a>
        <a class="action" href="/listening">Start Listening Test</a>
        <a class="action" href="/reading">Start Reading Test</a>
        <a class="action" href="/writing">Open Writing Exam</a>
        <a class="action" href="/speaking/simulator">Speaking Simulator</a>
        <a class="action" href="/review">Attempt History / Review</a>
        <a class="action" href="/study-plan">Study Plan</a>
        <a class="action" href="/progress">Progress & Analytics</a>
        <a class="action" href="/ai?sidebar=1">AI Sidebar (Docked)</a>
        <a class="action warn" href="/pricing">Upgrade / Pricing</a>
      </div>
      <div class="hint">Deep links are live targets for the app. Ensure each route exists or shows a friendly ‚ÄúComing Soon‚Äù stub in production.</div>
    </div>

    <!-- üü• LAUNCH BLOCKERS (must-fix) -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">üü• Launch Blockers (must fix before public subscriptions)</div>
      <ul>
        <li><b>Listening v1 E2E</b> ‚Äî 1 full mock, segmented audio, timer, submit ‚Üí score ‚Üí review (<a class="link" href="#tasks">jump to tasks</a>)</li>
        <li><b>Reading v1 E2E</b> ‚Äî passages, question types, navigation, submit ‚Üí score ‚Üí review</li>
        <li><b>Payments / Subscriptions</b> ‚Äî checkout flow + plan gating; replace ‚ÄúJoin Waitlist‚Äù CTAs</li>
        <li><b>Writing Exam UI</b> ‚Äî prompt panel, editor with live word count, autosave, AI submit + review</li>
        <li><b>Dashboard & Navigation</b> ‚Äî post‚Äëlogin hub linking 4 modules; clear module entry points</li>
        <li><b>Design System sweep</b> ‚Äî remove inline styles; token classes only; dark/light verified</li>
      </ul>
    </div>

    <!-- QUICK NAV: deep links so you can go anywhere from anywhere -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">üß≠ Quick Nav ‚Äî Deep Links</div>
      <div class="grid">
        <div><a href="/dashboard" class="link">/dashboard</a> ‚Üí Student hub & next actions</div>
        <div><a href="/listening" class="link">/listening</a> ‚Üí Listening Exam Room</div>
        <div><a href="/reading" class="link">/reading</a> ‚Üí Reading Exam Room</div>
        <div><a href="/writing" class="link">/writing</a> ‚Üí Writing Exam Room</div>
        <div><a href="/speaking/simulator" class="link">/speaking/simulator</a> ‚Üí Speaking Exam Room (P1)</div>
        <div><a href="/review" class="link">/review</a> ‚Üí Attempts & detailed review</div>
        <div><a href="/progress" class="link">/progress</a> ‚Üí Analytics & band trajectory</div>
        <div><a href="/study-plan" class="link">/study-plan</a> ‚Üí Planner & calendar</div>
        <div><a href="/settings/billing" class="link">/settings/billing</a> ‚Üí Subscriptions & invoices</div>
        <div><a href="/pricing" class="link">/pricing</a> ‚Üí Plans page</div>
        <div><a href="/ai?sidebar=1" class="link">/ai?sidebar=1</a> ‚Üí Docked Sidebar AI anywhere</div>
        <div><a href="/admin" class="link">/admin</a> ‚Üí Overview KPIs & drill-downs</div>
        <div><a href="/admin/teachers" class="link">/admin/teachers</a> ‚Üí Teacher roster & approvals</div>
        <div><a href="/admin/students" class="link">/admin/students</a> ‚Üí Cohorts, progress, impersonate</div>
        <div><a href="/admin/reports" class="link">/admin/reports</a> ‚Üí Weekly & monthly exports</div>
        <div><a href="/admin/ai-queue" class="link">/admin/ai-queue</a> ‚Üí AI evaluation queue monitor</div>
        <div><a href="/admin/moderation" class="link">/admin/moderation</a> ‚Üí Writing/Speaking overrides</div>
        <div><a href="/admin/billing" class="link">/admin/billing</a> ‚Üí Plans, credits, invoices</div>
        <div><a href="/admin/settings" class="link">/admin/settings</a> ‚Üí Feature flags, roles</div>
      </div>
    </div>

    <!-- START HERE: FIRST STEPS -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">üö¶ Start Here (Day 0 ‚Üí Day 7)</div>
      <div class="grid">
        <div><span class="badge ok">P1</span> <b>Unblock the build</b><br/>Fix ESLint TypeScript errors; prefer <code>@ts-expect-error</code> for known temporary issues.</div>
        <div><span class="badge ok">P2</span> <b>Listening E2E</b><br/>Route shell, timers, submit scoring, /review. Target: 1 complete test runnable.</div>
        <div><span class="badge ok">P3</span> <b>Reading fixes</b><br/>Tables not-null, RLS-safe writes; finish review page highlights.</div>
        <div><span class="badge ok">P4</span> <b>Speaking polish</b><br/>Timer & auto-record; P1 cadence; P2 prep+beeps; P3 discussion; upload/auth 401 fix; attach AI feedback.</div>
      </div>
      <div class="hint">All routes & components must follow the <b>Design System (Pages Router)</b>: DS Container/Card/Button, NavLink, dark/light, and deep links.</div>
    </div>

    <div class="bar">
      <select id="filter">
        <option value="all">Show: All</option>
        <option value="done">Completed</option>
        <option value="inprogress">In progress</option>
        <option value="notstarted">Not started</option>
      </select>
      <button class="btn" id="onlyToday">Updated: Today</button>
      <button class="btn" id="reset">Reset</button>
    </div>

    <div class="stats">
      <div class="stat">Total: <b id="tTotal">0</b></div>
      <div class="stat">Completed: <b id="tDone">0</b></div>
      <div class="stat">In progress: <b id="tProg">0</b></div>
      <div class="stat">Not started: <b id="tTodo">0</b></div>
    </div>

    <div class="card">
      <div class="section-title">Phase-1 Scope & Tasks</div>
      <table>
        <thead>
        <tr>
          <th>#</th>
          <th>Mark</th>
          <th>Item</th>
          <th>Development summary</th>
          <th class="nowrap">Updated</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <!-- ROWS INJECTED BY JS -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // ISO date helpers
    const today = new Date();
    const ISO = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);
    const TODAY = ISO(today);

    // ------- DATA (status, item, optional summary, optional updated ISO) ----------
    // NOTE: Top section: Launch Blockers added first so they appear at the top.
    const tasks = [
      // LAUNCH BLOCKERS (P0)
      ["[ ]", "Launch Blocker ‚Äî Listening v1 E2E (1 full mock)",
        "Segmented audio with seek marks, enforce playback rules; renderer per type (MCQ, form, map), exam timer + autosubmit; /listening & /review routes wired.", TODAY],
      ["[ ]", "Launch Blocker ‚Äî Reading v1 E2E (1 full mock)",
        "Multi-passage layout; TF/NG, Yes/No/NG, matching, headings; nav grid & next-unanswered; submit ‚Üí score ‚Üí review (answers & explanations).", TODAY],
      ["[ ]", "Launch Blocker ‚Äî Payments & Subscriptions",
        "Enable checkout & plan gating. Replace ‚ÄòJoin Waitlist‚Äô CTAs with Upgrade/Subscribe. Entitlements checked across routes; billing page ready.", TODAY],
      ["[ ]", "Launch Blocker ‚Äî Writing Exam UI",
        "Prompt panel + rich editor with live word count; autosave drafts; AI submit; review page with rubric breakdown.", TODAY],
      ["[ ]", "Launch Blocker ‚Äî Dashboard & Navigation",
        "Post-login dashboard hub linking Listening/Reading/Writing/Speaking; add module entries in header/menu. Deep links validated.", TODAY],
      ["[ ]", "Launch Blocker ‚Äî Design System compliance sweep",
        "Remove inline styles; use token classes only; verify dark/light across pages; internal navigation via Link/NavLink.", TODAY],

      // 1. User Module (6)
      ["[x]", "User Module ‚Äî User registration & login (email, social, phone)"],
      ["[x]", "User Module ‚Äî Profile setup (goal band, country, level)"],
      ["[ ]", "User Module ‚Äî Role-based access (student, teacher, admin)",
        "Supabase RLS + claims (role in user_metadata). Gate admin routes; teacher review overrides; DS Badge for role. Est: 2‚Äì3d.", TODAY],
      ["[ ]", "User Module ‚Äî Daily streak & study calendar",
        "Persist streaks (server truth), show StreakIndicator; client-only hydration for date math via dynamic import.", TODAY],
      ["[ ]", "User Module ‚Äî Saved tests, bookmarked content",
        "Tables: saved_attempts, bookmarks. Add buttons on review pages; unify via DS Button.", TODAY],
      ["[ ]", "User Module ‚Äî Language preference settings",
        "Store locale in profile; load i18n; respect in date/number/voice accent defaults.", TODAY],

      // 2. Learning Module (5)
      ["[ ]", "Learning Module ‚Äî Structured course library (Academic & General)",
        "Categories ‚Üí units ‚Üí lessons. Use DS Cards grid, tokenized colors. Est: 3d for shell.", TODAY],
      ["[ ]", "Learning Module ‚Äî Grammar, vocabulary, collocations lessons",
        "Markdown-backed lessons + quiz micro-checks; track completion.", TODAY],
      ["[x]", "Learning Module ‚Äî IELTS strategy tips (all 4 skills)"],
      ["[ ]", "Learning Module ‚Äî AI-generated practice drills",
        "Prompt templates per skill; credit guard; store AI tasks as attempts.", TODAY],
      ["[ ]", "Learning Module ‚Äî Study planner",
        "Weekly plan, time commitment; DS Progress; reminders (later).", TODAY],

      // 3. Listening Module (8) ‚Äî Shell partly done
      ["[~]", "Listening Module ‚Äî Route shell (/listening) & test view",
        "DS Container + Card; navbar to sections.", TODAY],
      ["[~]", "Listening Module ‚Äî Audio player with segments",
        "Accurate seek marks; disable replay when needed.", TODAY],
      ["[~]", "Listening Module ‚Äî Question rendering (MCQ, gap fill, map)",
        "Renderer per type; DS Radio, Input; validation & autosave.", TODAY],
      ["[~]", "Listening Module ‚Äî Timer & autosubmit",
        "Exam-timer component; on expiry, submit attempt.", TODAY],
      ["[~]", "Listening Module ‚Äî Real-time answer input",
        "Local state + debounce save; progress nav; accessibility labels.", TODAY],
      ["[~]", "Listening Module ‚Äî Band scoring & answer review",
        "Server /submit computes raw & band; persist attempt; map to bands.", TODAY],
      ["[~]", "Listening Module ‚Äî Highlight correct vs user answer",
        "Review screen diff with green/red badges; show transcripts.", TODAY],

      // 7. Reading Module (6)
      ["[x]", "Reading Module ‚Äî Full passage with real IELTS question types"],
      ["[ ]", "Reading Module ‚Äî Support for TF/NG, Matching, MCQ, etc.",
        "Supabase adapters: options as jsonb, fix casts; renderers per type.", TODAY],
      ["[ ]", "Reading Module ‚Äî Question-type-wise filtering",
        "Sidebar filter chips; counts per type; jump to next unanswered.", TODAY],
      ["[x]", "Reading Module ‚Äî Timer + live progress bar"],
      ["[ ]", "Reading Module ‚Äî AI answer explanation on review",
        "After submit, call /api/reading/explain per wrong answer; cache.", TODAY],
      ["[ ]", "Reading Module ‚Äî Stats per passage & per type",
        "Compute accuracy by type; heatmap of time per question.", TODAY],

      // 8. Performance & Analytics Module (6)
      ["[ ]", "Performance & Analytics ‚Äî Skill-wise band progression",
        "Simple line chart per skill across attempts; DS Card + recharts.", TODAY],
      ["[ ]", "Performance & Analytics ‚Äî Weekly/monthly reports",
        "CRON or on-demand aggregation; email export later.", TODAY],
      ["[ ]", "Performance & Analytics ‚Äî Weakness detection & suggestions",
        "Identify low-accuracy types; suggest drills; link to learning.", TODAY],
      ["[ ]", "Performance & Analytics ‚Äî Leaderboard / percentile rank",
        "Opt-in anonymized ranks per mock; privacy-safe.", TODAY],
      ["[ ]", "Performance & Analytics ‚Äî Study time tracker",
        "Track active time per module; streak tie-in.", TODAY],
      ["[ ]", "Performance & Analytics ‚Äî Cohort/teacher reports",
        "Teacher view: cohort stats; admin view: platform stats.", TODAY],

      // 9. Writing Module (6)
      ["[~]", "Writing Module ‚Äî Task 1 & Task 2 prompts"],
      ["[ ]", "Writing Module ‚Äî Timer, word count, autosave"],
      ["[ ]", "Writing Module ‚Äî AI feedback (coherence, grammar, vocab)"],
      ["[ ]", "Writing Module ‚Äî Band score rubric + explanation"],
      ["[ ]", "Writing Module ‚Äî Samples gallery with filters"],
      ["[ ]", "Writing Module ‚Äî Export & share"],

      // 10. Teacher/Admin Module (6)
      ["[ ]", "Teacher/Admin Module ‚Äî User monitoring dashboard",
        "Read-only charts; filter by cohort; DS table.", TODAY],
      ["[ ]", "Teacher/Admin Module ‚Äî Writing & speaking review override",
        "Moderation UI to overwrite AI score; log rationale.", TODAY],
      ["[ ]", "Teacher/Admin Module ‚Äî Upload custom content/tests",
        "CSV/JSON import for questions; validate schema.", TODAY],
      ["[ ]", "Teacher/Admin Module ‚Äî Approve new test papers",
        "Approval queue; status badges.", TODAY],
      ["[ ]", "Teacher/Admin Module ‚Äî View usage metrics & heatmaps",
        "Top pages, drop-offs; anon analytics.", TODAY],
      ["[ ]", "Teacher/Admin Module ‚Äî Manage subscriptions",
        "Assign plans, credits; Stripe later.", TODAY],

      // 10a. Admin Dashboard (deeper)
      ["[ ]", "Admin Dashboard ‚Äî Overview KPIs (active users, attempts, avg band, queue)",
        "Route <a class=\"link\" href=\"/admin\">/admin</a>. DS Cards with 4 KPIs ‚Üí each links to drill-down.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Teachers management",
        "Route <a class=\"link\" href=\"/admin/teachers\">/admin/teachers</a>. Roster, invites, approval queue, role change.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Students management",
        "Route <a class=\"link\" href=\"/admin/students\">/admin/students</a>. Cohorts, filters, progress, contact buttons.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Impersonate user & banner",
        "Route <a class=\"link\" href=\"/admin/imp-as\">/admin/imp-as</a>. Uses magic link redirect; shows yellow banner.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Reports (weekly/monthly, export CSV)",
        "Route <a class=\"link\" href=\"/admin/reports\">/admin/reports</a>. Time range picker; export; deep links to modules.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî AI evaluation queue monitor",
        "Route <a class=\"link\" href=\"/admin/ai-queue\">/admin/ai-queue</a>. See pending/scored; retry; provider status.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Moderation (writing/speaking overrides)",
        "Route <a class=\"link\" href=\"/admin/moderation\">/admin/moderation</a>. Override AI score; keep rationale log.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Billing & subscriptions",
        "Route <a class=\"link\" href=\"/admin/billing\">/admin/billing</a>. Assign plans/credits; invoices later.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Settings & feature flags",
        "Route <a class=\"link\" href=\"/admin/settings\">/admin/settings</a>. Toggle features; set roles; audit trail.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Module drill-down pages",
        "Routes like <a class=\"link\" href=\"/admin/modules/listening\">/admin/modules/listening</a> etc; heatmaps & attempts.", TODAY],
      ["[ ]", "Admin Dashboard ‚Äî Access control (teachers/admins only)",
        "Guard with RoleGuard; hide links for students; DS Badge for role.", TODAY],

      // 10b. AI Sidebar Chat (Docked)
      ["[~]", "AI Sidebar ‚Äî Dockable chat UI across app",
        "Open via <a class=\"link\" href=\"/ai?sidebar=1\">/ai?sidebar=1</a>; resizable drawer; DS Button to toggle.", TODAY],
      ["[~]", "AI Sidebar ‚Äî Providers (Grok ‚úÖ, Gemini ‚ö†Ô∏è fix)",
        "Server endpoint <a class=\"link\" href=\"/api/ai/chat\">/api/ai/chat</a>; switchable model; graceful fallback.", TODAY],
      ["[ ]", "AI Sidebar ‚Äî Contextual awareness",
        "Inject route, selection, user band/weaknesses; suggests next action.", TODAY],
      ["[ ]", "AI Sidebar ‚Äî Function calls (actions)",
        "Commands: /explain, /rewrite, /hint, /quiz, /search; can open deep links.", TODAY],
      ["[ ]", "AI Sidebar ‚Äî Voice (STT/TTS)",
        "Hold-to-talk; read answers; respect locale & accent.", TODAY],
      ["[ ]", "AI Sidebar ‚Äî Save to attempts & notes",
        "Attach chat to attempt ID; export to markdown/PDF.", TODAY],
      ["[ ]", "AI Sidebar ‚Äî Admin usage analytics",
        "Route <a class=\"link\" href=\"/admin/ai-usage\">/admin/ai-usage</a>. Track tokens, provider success, top intents.", TODAY],

      // 11. Community & Support Module (5)
      ["[ ]", "Community & Support ‚Äî Discussion forums / study groups",
        "Light Q&A first; upvote; report abuse.", TODAY],
      ["[ ]", "Community & Support ‚Äî Peer review for writing/speaking",
        "Swap samples; rubric checklist.", TODAY],
      ["[ ]", "Community & Support ‚Äî Live chat with AI/teachers",
        "Start with AI only; transcripts saved.", TODAY],
      ["[ ]", "Community & Support ‚Äî Ask a doubt (with AI reply + upvote)",
        "Threaded answers; accepted solution.", TODAY],
      ["[ ]", "Community & Support ‚Äî Leaderboards, badges, achievements",
        "Use DS Badge variants; earn rules.", TODAY],

      // 12. Monetization Module (5)
      ["[ ]", "Monetization ‚Äî Subscription tiers (free, premium, pro)",
        "Free = Compass; Starter/Booster/Master tiers; feature gates.", TODAY],
      ["[ ]", "Monetization ‚Äî Credits for feedback attempts",
        "Deduct on AI calls; show remaining credits.", TODAY],
      ["[ ]", "Monetization ‚Äî Discount & referral code engine",
        "Simple code table; apply at checkout.", TODAY],
      ["[ ]", "Monetization ‚Äî Trial vs full feature gating",
        "Feature flags by plan; DS Alert nudges.", TODAY],
      ["[ ]", "Monetization ‚Äî Payment & receipt (later)"],

      // 13. Platform Ops (5)
      ["[ ]", "Ops ‚Äî Error boundary & logging",
        "Client error boundary; server logging; toast for user-friendly errors.", TODAY],
      ["[ ]", "Ops ‚Äî Performance budgets",
        "Measure TTI/LCP on key pages; code-split heavy routes.", TODAY],
      ["[ ]", "Ops ‚Äî Accessibility sweep",
        "Labels, focus, color contrast, keyboard traps.", TODAY],
      ["[ ]", "Ops ‚Äî SEO on public pages",
        "Meta, OG, sitemap, robots; clean slugs.", TODAY],
      ["[ ]", "Ops ‚Äî CI/CD & preview checks",
        "PR checks: type, lint, build; preview app.", TODAY],
    ];

    // ------- RENDER ----------
    const tbody = document.getElementById('tbody');
    const statusMap = {"[ ]": "notstarted", "[~]": "inprogress", "[x]": "completed"};
    const pillClass = s => s==="completed" ? "done" : s==="inprogress" ? "prog" : "todo";

    function render(){
      tbody.innerHTML = "";
      tasks.forEach((t, idx) => {
        const mark = statusMap[t[0]] || "notstarted";
        const summary = t[2] || "";
        const dateVal = t[3] || "";
        const tr = document.createElement('tr');
        tr.className = "row";
        tr.dataset.status = mark;
        tr.dataset.updated = dateVal || "";
        tr.innerHTML = `
          <td class="nowrap">${idx+1}</td>
          <td><span class="pill ${pillClass(mark)}">${t[0]}</span></td>
          <td>${t[1]}</td>
          <td class="muted sum" contenteditable="true" spellcheck="true">${summary}</td>
          <td class="nowrap"><input type="date" value="${dateVal}"/></td>
        `;
        tbody.appendChild(tr);
      });
      updateStats();
    }

    // ------- FILTER ----------
    const filter = document.getElementById('filter');
    const resetBtn = document.getElementById('reset');
    const onlyTodayBtn = document.getElementById('onlyToday');

    function applyFilter(){
      const val = filter.value;
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => {
        const st = r.dataset.status;
        let show = true;
        if (val === "completed" || val==="done") show = st==="completed";
        if (val === "inprogress") show = st==="inprogress";
        if (val === "notstarted") show = st==="notstarted";
        r.style.display = show ? "" : "none";
      });
    }

    filter.addEventListener('change', applyFilter);
    resetBtn.addEventListener('click', ()=>{
      filter.value="all";
      applyFilter();
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => r.style.display = "");
    });
    onlyTodayBtn.addEventListener('click', ()=>{
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => {
        const d = r.dataset.updated || "";
        r.style.display = d===ISO(today) ? "" : "none";
      });
    });

    // ------- STATS ----------
    function updateStats(){
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const total    = rows.length;
      const completed= rows.filter(r=>r.dataset.status==="completed").length;
      const inprog   = rows.filter(r=>r.dataset.status==="inprogress").length;
      const todo     = rows.filter(r=>r.dataset.status==="notstarted").length;
      document.getElementById('tTotal').textContent = total;
      document.getElementById('tDone').textContent  = completed;
      document.getElementById('tProg').textContent  = inprog;
      document.getElementById('tTodo').textContent  = todo;
    }

    // init
    render();
    applyFilter();
  </script>

<!-- TARGETS:START -->
<section id="targets" class="container">
  <h2>Phase‚Äë1 Targets: IELTS Exam Portal</h2>
  <div class="chips">
    <span class="chip">IELTS 4 Modules</span>
    <span class="chip">AI Evaluation</span>
    <span class="chip">Practice & Mocks</span>
    <span class="chip">Student Analysis</span>
    <span class="chip">Design System</span>
    <span class="chip">Reports & Deep Links</span>
  </div>

  <h3>Exam Layout ‚Äî Core (Listening ¬∑ Reading ¬∑ Writing ¬∑ Speaking)</h3>
  <ul>
    <li>Dedicated <strong>Exam Room</strong> per module with unified header (timer, progress, attempt id) and sticky footer (Prev, Next, Flag, Submit).</li>
    <li>Robust <strong>Timer</strong> with autosubmit, warnings at thresholds, and resume after refresh.</li>
    <li><strong>Question navigation</strong>: next/previous, jump-to grid, <em>next unanswered</em>, and flagged filter.</li>
    <li><strong>Attempt persistence</strong>: autosave answers, crash-safe resume, device change continuity.</li>
    <li><strong>Submit ‚Üí Score ‚Üí Review</strong> three-step flow with per-item correctness and explanations.</li>
    <li><strong>Accessibility</strong>: keyboard shortcuts, focus order, ARIA labels, transcripts/captions.</li>
    <li><strong>Anti-cheat</strong>: focus guard, optional copy/paste limits, tab-switch warnings, timeouts.</li>
  </ul>

  <h3>Module Specific Targets</h3>
  <ul>
    <li><strong>Listening</strong>: segmented audio with markers, playback limits, transcript-on-review, type renderers (MCQ, map, form, gap-fill).</li>
    <li><strong>Reading</strong>: multi-passage layout, per-type renderers (T/F/NG, yes/no/not given, headings, matching), sidebar filters and highlighter.</li>
    <li><strong>Writing</strong>: Task 1 &amp; 2 editor with prompt panel, live word count, structure hints, autosave drafts, plagiarism/paraphrase checks.</li>
    <li><strong>Speaking</strong>: mic recorder with cadence for Parts 1‚Äì3, preparation beeps/timers, upload to storage, playback and self-review.</li>
  </ul>

  <h3>AI Involvement</h3>
  <ul>
    <li><strong>Automated scoring</strong> for Writing &amp; Speaking (band prediction, rubric breakdown, actionable suggestions).</li>
    <li><strong>Explain answers</strong> for Reading &amp; Listening during review (rationale, key evidence, vocabulary support).</li>
    <li><strong>Personalized plan</strong> updates after each attempt: next tasks, weak-skill drills, daily goals.</li>
  </ul>

  <h3>Student Analysis & Tracking</h3>
  <ul>
    <li>Band conversion and <strong>attempt analytics</strong>: accuracy by skill/type, speed vs. accuracy, time-on-task.</li>
    <li><strong>Weakness detection</strong> and targeted recommendations with deep links to drills and lessons.</li>
    <li><strong>Study Plan</strong>: calendar, streaks, reminders/notifications, ETA to goal band.</li>
  </ul>

  <h3>Practice, Mocks & Content</h3>
  <ul>
    <li>Library of official-style tests and adaptive practice sets with difficulty ramping.</li>
    <li>Bookmarking, retakes, spaced repetition for vocabulary/grammar tied to mistakes.</li>
  </ul>

  <h3>Review & Reporting</h3>
  <ul>
    <li>Rich <strong>review screen</strong> with per-question commentary, transcripts, and downloadable report (PDF).</li>
    <li>Attempt history with filters (module, score band, time range) and shareable deep links.</li>
  </ul>

  <h3>Design System & Routing</h3>
  <ul>
    <li>Full compliance with <strong>Design System</strong>: token classes only, no inline colors, DS Buttons/Badges/Cards.</li>
    <li>Pages Router with <strong>dynamic routes</strong> for tests and attempts, and <strong>Link/NavLink</strong> for internal navigation.</li>
    <li>Light/Dark themes aligned with <em>desired_design</em> without breaking DS rules.</li>
  </ul>

  <h3>Data, APIs & Quality</h3>
  <ul>
    <li>Typed API inputs/outputs (no raw <code>req.body as any</code>), validation with friendly error messages.</li>
    <li>Reliable uploads (audio, drafts), retry queue, logging/monitoring, and Sentry-style error capture.</li>
  </ul>

  <h3>Launch Essentials</h3>
  <ul>
    <li>Onboarding to capture goal band &amp; exam date, quick-start tour, and plan gating by subscription.</li>
    <li>i18n-ready copy, GDPR-friendly privacy, and accessible UI across devices.</li>
  </ul>

  <p class="muted">Deep links: <a href="#targets">#targets</a> ¬∑ <a href="/listening">/listening</a> ¬∑ <a href="/reading">/reading</a> ¬∑ <a href="/writing">/writing</a> ¬∑ <a href="/speaking">/speaking</a> ¬∑ <a href="/dashboard">/dashboard</a></p>
</section>
<!-- TARGETS:END -->


<!-- USER:START -->
<section id="user-module" class="container">
  <h2>User Module</h2>
  <div class="chips">
    <span class="chip">Auth & Identity</span>
    <span class="chip">Profile & Onboarding</span>
    <span class="chip">Study Plan</span>
    <span class="chip">Subscriptions</span>
    <span class="chip">Notifications</span>
    <span class="chip">Security & Privacy</span>
  </div>

  <h3>Core</h3>
  <ul>
    <li><strong>Authentication</strong>: Email/Password, Phone OTP (Twilio), Google, Apple, Facebook; magic link; password reset.</li>
    <li><strong>Roles</strong>: student / teacher / admin with route guards and feature gating.</li>
    <li><strong>Onboarding</strong>: collect full name, country, phone, <em>goal band</em>, exam date, weaknesses, language.</li>
    <li><strong>Profile</strong>: avatar, bio, timezone, language & theme preferences, accessibility options.</li>
  </ul>

  <h3>Learning & Personalization</h3>
  <ul>
    <li><strong>Study Plan</strong>: daily/weekly targets, ETA to goal, auto-adjust plan from performance.</li>
    <li><strong>Dashboard</strong>: streaks, today‚Äôs tasks, weak-skill drills, recent attempts, AI coach tips.</li>
    <li><strong>Progress</strong>: attempt history, band trajectory, accuracy by type, time-on-task, downloadable reports.</li>
    <li><strong>Saved</strong>: bookmarks, flagged questions, retake queue, vocabulary & grammar lists.</li>
  </ul>

  <h3>Engagement</h3>
  <ul>
    <li><strong>Notifications</strong>: reminders (study sessions, test dates), email/SMS/WhatsApp, quiet hours.</li>
    <li><strong>Calendar</strong>: study calendar with rescheduling, missed-session catchup, Google/Apple export.</li>
    <li><strong>Referral</strong>: referral link, credits/rewards, invite tracking.</li>
  </ul>

  <h3>Billing & Access</h3>
  <ul>
    <li><strong>Subscriptions</strong>: plan management (Compass/Seedling/Rocket/Owl), upgrade/downgrade, invoices & receipts.</li>
    <li><strong>Entitlements</strong>: feature gating per plan, soft nudges for locked features.</li>
  </ul>

  <h3>Security & Data</h3>
  <ul>
    <li><strong>Account Security</strong>: 2FA (email/OTP), active sessions/devices, login history, revoke device.</li>
    <li><strong>Privacy & Data</strong>: profile export, delete account, communications preferences, GDPR-ready.</li>
    <li><strong>Support</strong>: help center, contact, issue reporter with logs (consented).</li>
  </ul>

  <h3>Innovations (Market Gaps)</h3>
  <div class="chips">
    <span class="chip">Motivation AI</span>
    <span class="chip">Slip Recovery</span>
    <span class="chip">Noise Ladder</span>
    <span class="chip">Accent Mirror</span>
    <span class="chip">10‚ÄëMin Mode</span>
    <span class="chip">Exam‚ÄëDay Suite</span>
    <span class="chip">Buddy Match</span>
    <span class="chip">Offline‚ÄëLite</span>
    <span class="chip">Privacy‚ÄëFirst</span>
  </div>
  <ul>
    <li><strong>Motivation AI Coach</strong> (<a href="/coach">/coach</a>): mood/energy‚Äëaware micro‚Äënudges, pep‚Äëtalks, and weekly reflections based on engagement patterns (privacy‚Äëfirst; no sensitive inference stored).</li>
    <li><strong>Slip‚ÄëRecovery Autopilot</strong> (<a href="/study-plan">/study-plan</a>): if tasks are missed, auto‚Äërebalances the next 7 days with lighter ‚Äúrestart‚Äù sessions and confidence‚Äëbuilder drills.</li>
    <li><strong>10‚ÄëMinute Mode</strong> (<a href="/quick">/quick</a>): one‚Äëtap ‚ÄúI have 10 minutes‚Äù that serves a focused micro‚Äëdrill from your weakest skill with instant feedback.</li>
    <li><strong>Noise Ladder for Listening</strong> (<a href="/labs/noise-ladder">/labs/noise-ladder</a>): progressive background noise & accents to harden real‚Äëworld comprehension.</li>
    <li><strong>Accent Mirror for Speaking</strong> (<a href="/labs/accent-mirror">/labs/accent-mirror</a>): shadowing + alignment meter and minimal‚Äëpairs trainer targeting your specific pronunciation gaps.</li>
    <li><strong>Exam‚ÄëDay Rehearsal Suite</strong> (<a href="/exam-day">/exam-day</a>): device/mic check, timing rehearsal, anxiety‚Äëcontrol scripts, and a dry‚Äërun checklist.</li>
    <li><strong>Study‚ÄëBuddy Match</strong> (<a href="/study-buddy">/study-buddy</a>): timezone & goal‚Äëband matching for 15‚Äëminute speaking swaps with built‚Äëin prompts and timers.</li>
    <li><strong>‚ÄúMy Mistakes‚Äù Book</strong> (<a href="/my-mistakes">/my-mistakes</a>): auto‚Äëcompiled grammar/vocab errors from attempts ‚Üí spaced practice with examples rewritten in your context.</li>
    <li><strong>Challenge‚Äëthe‚ÄëGrade</strong> (<a href="/review/challenge">/review/challenge</a>): ask ‚Äúwhy?‚Äù on AI scores; see rubric‚Äëbased justification and evidence highlights.</li>
    <li><strong>Parent/Coach Share</strong> (<a href="/share">/share</a>): read‚Äëonly progress link with weekly summaries and upcoming plan.</li>
    <li><strong>WhatsApp Daily Tasks</strong> (<a href="/notifications">/notifications</a>): opt‚Äëin task pings and quick‚Äëreply submissions via WhatsApp/SMS.</li>
    <li><strong>Language‚Äëof‚ÄëExplanation</strong> (<a href="/settings/language">/settings/language</a>): AI feedback/explanations in the user‚Äôs preferred language, examples localized.</li>
    <li><strong>Offline‚ÄëLite PWA</strong> (<a href="/offline">/offline</a>): cache practice sets, vocab, and drafts; sync when back online.</li>
    <li><strong>Context‚ÄëAware Calendar</strong> (<a href="/study-plan/calendar">/study-plan/calendar</a>): auto‚Äëlighten during travel/festivals/exams; catch‚Äëup windows later.</li>
    <li><strong>Visa/Admissions Readiness</strong> (<a href="/readiness">/readiness</a>): track target scores per university/visa, show gap‚Äëto‚Äëgoal and deadlines.</li>
    <li><strong>Streak Shield</strong> (<a href="/streak">/streak</a>): limited ‚Äúsick‚Äëday‚Äù tokens to protect long streaks without breaking habit psychology.</li>
  </ul>

  <p class="muted">Deep links: 
    <a href="/login">/login</a> ¬∑ 
    <a href="/signup">/signup</a> ¬∑ 
    <a href="/dashboard">/dashboard</a> ¬∑ 
    <a href="/profile">/profile</a> ¬∑ 
    <a href="/study-plan">/study-plan</a> ¬∑ 
    <a href="/progress">/progress</a> ¬∑ 
    <a href="/saved">/saved</a> ¬∑ 
    <a href="/notifications">/notifications</a> ¬∑ 
    <a href="/settings">/settings</a> ¬∑ 
    <a href="/settings/billing">/settings/billing</a> ¬∑ 
    <a href="/account/referrals">/account/referrals</a> ¬∑ 
    <a href="/coach">/coach</a> ¬∑ 
    <a href="/study-buddy">/study-buddy</a> ¬∑ 
    <a href="/exam-day">/exam-day</a> ¬∑ 
    <a href="/labs/noise-ladder">/labs/noise-ladder</a> ¬∑ 
    <a href="/labs/accent-mirror">/labs/accent-mirror</a> ¬∑ 
    <a href="/my-mistakes">/my-mistakes</a> ¬∑ 
    <a href="/offline">/offline</a> ¬∑ 
    <a href="/readiness">/readiness</a>
  </p>
</section>
<!-- USER:END -->


</body>
</html>
